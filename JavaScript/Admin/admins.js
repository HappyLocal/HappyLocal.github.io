var delObjectId;function onPageLoad(){document.getElementById("myTable").innerHTML="",tbl=document.getElementById("myTable");var e=Backendless.DataQueryBuilder.create();e.setSortBy(["email"]),e.setPageSize(100).setOffset(0),Backendless.Data.of("Users").find(e).then(function(e){var t,a=e.length;for(t=0;t<a;t++)addRow(tbl,e[t].email,e[t].userStatus,"edit","delete_forever",e[t].objectId,e[t].objectId,"update","delete",e[t].objectId,e[t].objectId)}).catch(function(e){toastNotification(e.message,"toast-error","error-symbol.png","red lighten-1","Infinity","#ce5548")})}function addCell(e,t,a){var n=document.createElement("td");n.id=a,n.innerHTML=t,e.appendChild(n)}function addCellRight(e,t,a,n){var s=document.createElement("td");s.classList.add("right-align");var i=document.createElement("BUTTON");i.classList.add("waves-effect"),i.classList.add("waves-light"),i.classList.add("btn-small"),i.classList.add("material-icons"),i.innerHTML=t,"delete_forever"==i.innerHTML?(i.classList.add("red"),i.classList.add("lighten-2")):(i.classList.add("green"),i.classList.add("lighten-2")),i.id=a,i.name=n,s.appendChild(i),e.appendChild(s)}function addRow(e,t,a,n,s,i,o,d,c,r,l){var m=document.createElement("tr");m.id=i,addCell(m,t,i),addCell(m,a,o),addCellRight(m,n,d,r),addCellRight(m,s,c,l),e.appendChild(m)}function registerAdmin(){var e=document.getElementById("user_email").value.trim(),t=document.getElementById("user_passw").value,a=document.getElementById("confirm_pass").value;if(!(""==e||""==t||t!=a||t.length<8)&&t.match(/.*[A-Z].*/)&&t.match(/.*\d.*/)&&1!=/\s/.test(t)){var n=new Backendless.User;return n.email=e,n.password=t,Backendless.UserService.register(n).then(function(e){onPageLoad(),toastNotification("Admin created successfully!","toast-tick","white-check-mark.png","light-blue darken-2",4e3,"#0277bd")}).catch(function(e){toastNotification(e.message,"toast-error","error-symbol.png","red lighten-1","Infinity","#ce5548")})}var s="";""==e&&(s+='"Email" is required!<br>'),""==t&&(s+='"Password" is required!<br>'),t.length<8&&(s+='"Password" must be at least 8 characters!<br>'),""==t||t.match(/.*[A-Z].*/)||(s+="Password requires at least 1 uppercase character!<br>"),""==t||t.match(/.*\d.*/)||(s+="Password requires at least 1 number!<br>"),""!=t&&t!=a&&(s+="Passwords don't match!<br>"),1==/\s/.test(t)&&(s+="Password cannot contain spaces!<br>"),toastNotification(s,"toast-error","error-symbol.png","red lighten-1","Infinity","#ce5548")}function logoutUser(){localStorage.setItem("userStatus","logged_out"),window.location.href="../admin.html"}function toastNotification(e,t,a,n,s,i){M.toast({html:'<div class="toast-side"></div><div class="toast-notification-con"><img class="'+t+'" src="../images/'+a+'"><div class="toast-message">'+e+'</div><img class="toast-close" src="../images/toast-close.png" height="16" width="16"></div>',displayLength:s,classes:""+n}),$(".toast-side").css({"background-color":i}),$(document).on("click",".toast-close",function(){$("#toast-container .toast").fadeOut(500,function(){$("#toast-container .toast").remove()})})}Backendless.serverURL="https://api.backendless.com",Backendless.initApp("073669A8-CCB7-2AED-FFEC-841A4CE5F400","FAFDE171-5308-49CF-9980-AA89E4F28F0C"),document.addEventListener("DOMContentLoaded",function(){onPageLoad();const e=localStorage.getItem("currentUser");document.getElementById("userEmail").innerHTML="Hi, "+e;var t=document.querySelectorAll(".fixed-action-btn");M.FloatingActionButton.init(t),t=document.querySelectorAll(".modal"),M.Modal.init(t)}),$("#myInput").on("keyup",function(){var e=$(this).val().toLowerCase();$("#myTable tr").filter(function(){$(this).toggle($(this).text().toLowerCase().indexOf(e)>-1)})}),registerAdminBtn.addEventListener("click",e=>{M.Toast.dismissAll()}),$(document).on("click","#update",function(){}),modalDeleteAdminConfirm.addEventListener("click",e=>Backendless.Data.of("Users").remove({objectId:delObjectId}).then(function(e){onPageLoad(),toastNotification("Admin deleted successfully!","toast-tick","white-check-mark.png","light-blue darken-2",4e3,"#0277bd")}).catch(function(e){toastNotification(e,"toast-error","error-symbol.png","red lighten-1","Infinity","#ce5548")})),$(document).on("click","#delete",function(){const e=document.getElementById("modal2");M.Modal.init(e,{dismissible:!0}).open();var t=$(this).attr("name"),a=$("#"+t).find("td:first").text();document.getElementById("modalDeleteAdminMessage").innerHTML="Do you want to delete the selected Admin? <br><br><b>"+a+"</b>",delObjectId=t});